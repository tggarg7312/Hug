<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>A Moment</title>
    <style>
        /* --- DESIGN RULES & COLOR PSYCHOLOGY --- */
        :root {
            --peach: #FAD6C4;
            --dusk-pink: #E8B4B8;
            --amber-glow: #D48C70;
            --text-warm: #4A332A;
            --hold-progress: 0;
        }

        /* Reset & Mobile Optimization */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body, html {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: linear-gradient(135deg, var(--peach), var(--dusk-pink));
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            color: var(--text-warm);
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
            /* CRITICAL FIX FOR IOS / IN-APP BROWSERS */
            cursor: pointer; 
            -webkit-tap-highlight-color: transparent;
        }

        /* SVG Noise Filter */
        .texture-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            opacity: 0.15;
            z-index: 100;
            background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)"/%3E%3C/svg%3E');
        }

        /* Cinematic Stages Container */
        .stage {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 1.5s ease-in-out;
            padding: 2rem;
            text-align: center;
            z-index: 1;
        }
        .stage.active {
            opacity: 1;
            pointer-events: auto;
            z-index: 2;
        }

        /* Typography */
        h1, p { font-weight: 300; letter-spacing: 0.5px; line-height: 1.6; }
        .small-text { font-size: 0.95rem; opacity: 0.85; }
        .reading-text { font-size: 1.15rem; max-width: 320px; }

        /* Specific Stage Elements */
        #text-come-closer, #text-closer, #text-tap { opacity: 0; transition: opacity 2s ease-in-out; }
        
        /* Subtle pulse for the tap prompt */
        @keyframes subtlePulse {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }
        #text-tap { 
            font-size: 0.75rem; 
            margin-top: 4rem; 
            animation: subtlePulse 3s infinite ease-in-out;
        }

        /* The Silhouette & Hold Interaction */
        .silhouette-container { margin-bottom: 2rem; pointer-events: none; }
        
        .silhouette-container img {
            width: 220px; height: 320px;
            object-fit: cover; border-radius: 50%;
            filter: blur(calc(25px - (var(--hold-progress) * 20px))) brightness(calc(1 + var(--hold-progress) * 0.15));
            transform: scale(calc(1 + (var(--hold-progress) * 0.35)));
            opacity: calc(0.6 + (var(--hold-progress) * 0.4));
            transition: filter 0.1s linear, transform 0.1s linear, opacity 0.1s linear;
            box-shadow: 0 0 calc(var(--hold-progress) * 50px) var(--amber-glow);
        }
        
        #press-area { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; cursor: pointer; }

        /* The POV Hug - Swaying & Breathing */
        @keyframes sway {
            0% { transform: translate(0px, 0px) rotate(0deg); }
            25% { transform: translate(1px, 2px) rotate(0.3deg); }
            50% { transform: translate(0px, 3px) rotate(0deg); }
            75% { transform: translate(-1px, 2px) rotate(-0.3deg); }
            100% { transform: translate(0px, 0px) rotate(0deg); }
        }
        .hug-active .texture-overlay { opacity: 0.25; transition: opacity 3s ease; }
        .hug-active { background: linear-gradient(135deg, var(--amber-glow), var(--dusk-pink)) !important; transition: background 4s ease; }
        .sway-container { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; animation: sway 7s infinite ease-in-out; }

        /* Breathing Circle */
        .breath-circle {
            width: 80px; height: 80px;
            border: 1px solid var(--text-warm); border-radius: 50%; opacity: 0.4;
            transition: transform 4s ease-in-out, opacity 4s ease;
        }
        .inhale .breath-circle { transform: scale(3.5); opacity: 0.1; }
        .exhale .breath-circle { transform: scale(1); opacity: 0.4; }

        /* Final Dimming */
        .dimmed { background: #1a1210 !important; transition: background 6s ease !important; }
        .dimmed .texture-overlay { opacity: 0.05; }
        .dimmed p { color: var(--amber-glow); }
    </style>
</head>
<body>

    <div class="texture-overlay"></div>

    <div id="stage-opening" class="stage active">
        <p id="text-come-closer" class="small-text">Come closer...</p>
        <p id="text-closer" class="small-text" style="margin-top: 2rem;">Closer.</p>
        <p id="text-tap">(tap anywhere)</p>
    </div>

    <div id="stage-press" class="stage">
        <div id="press-area"></div>
        <div class="silhouette-container">
            <img src="https://images.unsplash.com/photo-1518144591331-17a5dd71c477?q=80&w=600&auto=format&fit=crop" alt="Presence">
        </div>
        <p class="small-text">Press and hold… to step into my arms.</p>
    </div>

    <div id="stage-hug" class="stage">
        <div class="sway-container">
            <p id="hug-text" class="reading-text"></p>
        </div>
    </div>

    <div id="stage-breathe" class="stage">
        <div class="sway-container">
            <div class="breath-circle"></div>
            <p id="breathe-text" class="small-text" style="margin-top: 2rem;">Breathe with me.</p>
        </div>
    </div>

    <div id="stage-message" class="stage">
        <div class="sway-container">
            <p class="reading-text" style="text-align: left;">
                <span id="msg-1" style="opacity: 0; transition: opacity 2.5s;">In a world that moves too fast…<br>I want to be the place where you can pause.<br><br></span>
                <span id="msg-2" style="opacity: 0; transition: opacity 2.5s;">When days are heavy — come here.<br>When nights feel long — come here.<br><br></span>
                <span id="msg-3" style="opacity: 0; transition: opacity 3s;">You will always have a space in my arms<br>where nothing is demanded from you…<br>and everything about you is welcome.</span>
            </p>
        </div>
    </div>

    <div id="stage-final" class="stage">
        <p id="final-text-1" class="reading-text" style="opacity: 0; transition: opacity 3s;">Whenever life feels overwhelming…</p>
        <p id="final-text-2" class="reading-text" style="opacity: 0; transition: opacity 3s; margin-top: 1rem;">Remember this hug exists.</p>
        <p id="final-text-3" class="reading-text" style="opacity: 0; transition: opacity 4s; margin-top: 3rem;">And so do I.</p>
    </div>

    <script>
        const sleep = ms => new Promise(resolve => setTimeout(resolve, ms));
        const fadeText = (id, opacity) => { document.getElementById(id).style.opacity = opacity; };
        
        const switchStage = (hideId, showId) => {
            document.getElementById(hideId).classList.remove('active');
            setTimeout(() => { document.getElementById(showId).classList.add('active'); }, 50); 
        };

        // --- STAGE 1: FORCED EXECUTION ---
        // Bypasses window.onload entirely so iOS Safari cannot block it
        setTimeout(async () => {
            await sleep(800);
            fadeText('text-come-closer', 1);
            await sleep(2000);
            fadeText('text-closer', 1);
            await sleep(1500);
            fadeText('text-tap', 1); 
        }, 100);

        let hasStarted = false;
        const startExperience = () => {
            if (!hasStarted) {
                hasStarted = true;
                switchStage('stage-opening', 'stage-press');
            }
        };

        // Binds directly to the document root to guarantee touch detection
        document.documentElement.addEventListener('click', startExperience);
        document.documentElement.addEventListener('touchstart', startExperience, { passive: true });

        // --- STAGE 2 LOGIC: THE PRESS & HOLD ---
        const pressArea = document.getElementById('press-area');
        let isHolding = false;
        let holdProgress = 0;
        let holdFrame;
        let hasHugTriggered = false;

        const updateHold = () => {
            if (hasHugTriggered) return;

            if (isHolding && holdProgress < 1) {
                holdProgress += 0.007;
                document.documentElement.style.setProperty('--hold-progress', holdProgress);
                holdFrame = requestAnimationFrame(updateHold);
            } else if (!isHolding && holdProgress > 0) {
                holdProgress -= 0.02;
                document.documentElement.style.setProperty('--hold-progress', Math.max(0, holdProgress));
                holdFrame = requestAnimationFrame(updateHold);
            } else if (holdProgress >= 1 && isHolding) {
                hasHugTriggered = true;
                triggerHugSequence();
            }
        };

        const startHold = (e) => { 
            if (e.cancelable) e.preventDefault(); 
            if (hasHugTriggered) return;
            isHolding = true; 
            cancelAnimationFrame(holdFrame); 
            updateHold(); 
        };
        
        const endHold = (e) => { 
            if (e.cancelable) e.preventDefault(); 
            isHolding = false; 
            cancelAnimationFrame(holdFrame); 
            updateHold(); 
        };

        pressArea.addEventListener('mousedown', startHold);
        pressArea.addEventListener('touchstart', startHold, {passive: false});
        window.addEventListener('mouseup', endHold);
        window.addEventListener('touchend', endHold);

        // --- MASTER CINEMATIC SEQUENCE ---
        async function triggerHugSequence() {
            pressArea.style.pointerEvents = 'none'; 
            document.body.classList.add('hug-active'); 
            
            switchStage('stage-press', 'stage-hug');
            const hugText = document.getElementById('hug-text');

            await sleep(2500);
            hugText.style.opacity = 0; 
            hugText.innerText = "You don't have to be strong right now.";
            hugText.style.transition = "opacity 2.5s"; 
            setTimeout(() => hugText.style.opacity = 1, 50);
            
            await sleep(4500);
            hugText.style.opacity = 0;
            await sleep(2500);
            hugText.innerText = "I've got you.";
            hugText.style.opacity = 1;

            await sleep(4000);
            hugText.style.opacity = 0;
            await sleep(2500);
            hugText.innerText = "Just stay here for a moment.";
            hugText.style.opacity = 1;

            await sleep(5500);
            
            switchStage('stage-hug', 'stage-breathe');
            const breatheStage = document.getElementById('stage-breathe');
            const breatheText = document.getElementById('breathe-text');
            
            await sleep(2500);
            for(let i=0; i<3; i++) {
                breatheText.innerText = "Inhale...";
                breatheStage.classList.remove('exhale');
                breatheStage.classList.add('inhale');
                await sleep(4000);
                
                breatheText.innerText = "Exhale...";
                breatheStage.classList.remove('inhale');
                breatheStage.classList.add('exhale');
                await sleep(5000); 
            }

            switchStage('stage-breathe', 'stage-message');
            await sleep(2000);
            fadeText('msg-1', 1);
            await sleep(4000);
            fadeText('msg-2', 1);
            await sleep(4000);
            fadeText('msg-3', 1);
            
            await sleep(8000);

            switchStage('stage-message', 'stage-final');
            await sleep(2500);
            fadeText('final-text-1', 1);
            
            await sleep(3500);
            fadeText('final-text-2', 1);

            await sleep(4500);
            document.body.classList.add('dimmed'); 
            
            await sleep(3500);
            fadeText('final-text-3', 1);
        }
    </script>
</body>
</html>
